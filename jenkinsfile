node {
  stage('SCM') {
    checkout scm
  }

  stage('Build') {
    // Compile the Java code
    sh 'mvn clean compile'
  }

  stage('SonarQube Analysis') {
    // Set the absolute path for the SonarQube scanner
    def scannerHome = '/home/harsha/Downloads/sonarqube/sonar-scanner-cli-6.1.0.4477-linux-x64/sonar-scanner-6.1.0.4477-linux-x64';

    withSonarQubeEnv() {
      // Run SonarQube analysis and specify the location of compiled classes
      sh "${scannerHome}/bin/sonar-scanner -Dsonar.java.binaries=target/classes"
    }
  }
}
