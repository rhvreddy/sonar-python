node {
  stage('SCM') {
    checkout scm
  }

  stage('Build') {
    // Use the Maven tool configured in Jenkins
    def mvnHome = tool name: 'Maven 3.x', type: 'maven'
    // Compile the Java code using Maven
    sh "${mvnHome}/bin/mvn clean compile"
  }

  stage('SonarQube Analysis') {
    // Set the absolute path for the SonarQube scanner
    def scannerHome = '/home/harsha/Downloads/sonarqube/sonar-scanner-cli-6.1.0.4477-linux-x64/sonar-scanner-6.1.0.4477-linux-x64';

    withSonarQubeEnv() {
      // Run SonarQube analysis and specify the location of compiled classes
      sh "${scannerHome}/bin/sonar-scanner -Dsonar.java.binaries=target/classes"
    }
  }
}
